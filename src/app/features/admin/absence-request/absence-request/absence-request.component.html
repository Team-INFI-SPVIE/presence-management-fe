<div class="container-fluid">

    <!-- Page Heading -->
    <div class="d-sm-flex align-items-center justify-content-between mb-4" >
        <h1 class="h3 mb-0 text-gray-800">Demande d'Absences</h1>
        <button type="button" class="btn btn-primary" data-toggle="modal" data-target=".bd-example-modal-lg">Demande d'absence</button>
    </div>

    <div class="modal fade bd-example-modal-lg" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-header bg-color-yellow ">
                <h5 class="modal-title text-white  font-weight-bold" id="exampleModalLongs">
                    Nouvelle Demande d'Absence
                </h5>

                <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
          <div class="modal-content">
            <div class="row">
                <!-- <div class="col-lg-5 d-none d-lg-block bg-register-image"></div> -->
                <div class="col-lg-12">
                    <div class="p-5">
                        <form class="user"
                        name="form"
                        #f="ngForm"
                        (ngSubmit)="f.form.valid && onSubmit()"
                        >
                            <div class="form-group row">
                                <div class="col-sm-6">
                                    <input 
                                        type="text"
                                        class="form-control" 
                                        placeholder="Objet"
                                        id="object"
                                        [(ngModel)]="form.object"
                                        #object="ngModel"
                                        [ngModelOptions]="{standalone: true}"
                                     >
                                </div>
                            </div>
                            <div class="form-group row">
                                <div class="col-sm-6 mb-3 mb-sm-0">
                                    <select class="custom-select mr-sm-2"
                                        id="startTime"
                                        #startTime
                                        (change)="onStartTimeSelected(startTime.value)"
                                    >
                                        <option default>Heure de debut</option>
                                        <option>8h</option>
                                        <option>9h</option>
                                        <option>10h</option>
                                        <option>11h</option>
                                        <option>12h</option>
                                        <option>13h</option>
                                        <option>14h</option>
                                        <option>15h</option>
                                        <option>16h</option>
                                        <option>17h</option>
                                    </select>
                                </div>
                                <div class="col-sm-6">
                                    <select class="custom-select mr-sm-2"
                                        #endTime
                                        (change)="onEndTimeSelected(endTime.value)"
                                        id="endTime"
                                    >
                                        <option default>Heure de fin</option>
                                            <option >8h</option>
                                            <option>9h</option>
                                            <option>10h</option>
                                            <option>11h</option>
                                            <option>12h</option>
                                            <option>13h</option>
                                            <option>14h</option>
                                            <option>15h</option>
                                            <option>16h</option>
                                            <option>17h</option>
                                    </select>
                                </div>
                            </div>
                                <div class="custom-file">
                                    <input
                                     type="file"
                                      class="custom-file-input" 
                                      id="piecejointe"
                                      [(ngModel)]="form.piecejointe"
                                      #piecejointe="ngModel"
                                      [ngModelOptions]="{standalone: true}"
                                      
                                      >
                                    <label class="custom-file-label" for="customFile"></label>
                                </div>
                                <br><br>
                                <div class="form-group">
                                    <textarea
                                     class="form-control"
                                      id="message"
                                       rows="3"
                                        placeholder="Zone de saisie du message"
                                        [(ngModel)]='form.message'
                                        #message='ngModel'
                                        name="message"
                                       
                                        ></textarea>
                                </div>

                            <div class="modal-footer">
                                <button type="button" class="btn btn-danger" data-dismiss="modal">Fermer</button>
                                <button type="submit" class="btn btn-primary">Enregistrer</button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
          </div>
        </div>
      </div>

    <div class="card shadow mb-4">
        <div class="card-header  bg-color-yellow py-3">
            <h2 class="m-0 font-weight-bold text-white   text-center">Liste de mes demandes d'Absences</h2>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>
                        <tr>
                            <th>Message</th>
                            <th>Date</th>
                            <th>Objet</th>
                            <th>Heures</th>
                            <th>Statut</th>
                        </tr>
                    </thead>

                    <tbody>
                        <tr *ngFor="let abs of absence |async">
                            <td>
                             {{abs.message}}
                            </td>
                            <td>{{abs.date}}</td>
                            <td>{{abs.object}}</td>
                            <td> {{abs.startTime}}-{{abs.endTime}}</td>
                            <td>
                                <span class="badge badge-primary">En cours...</span>
                            </td>
                        </tr>

                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>
<!-- /.container-fluid -->




